{% extends "auctions/layout.html" %}

{% block body %}
    {% if message %}
        <div class="alert alert-primary" role="alert">
            {{ message }}
        </div>
    {% endif %}

    <header>
        <h2>Listing: {{ listing.title }}</h2>
    </header>

    <div class="watchlist">
        <form action="{% url 'watchlist' %}" method="get">
            <input type="hidden" name="user_id" value="{{ user.id }}">
            <input type="hidden" name="listing_id" value="{{ listing.id }}">
            {% if user.is_authenticated and watchlist %}
                <input type="hidden" name="action" value="remove">
                <button type="submit" class="btn btn-danger">Remove from Watchlist</button>
            {% else %}
                <input type="hidden" name="action" value="add">
                <button type="submit" class="btn btn-success">Add to Watchlist</button>
            {% endif %}
        </form>
    </div>

    <figure class="listing-img-container">
        <img class="listing-img rounded" src="{{ listing.image.url }}" alt="Image of {{ listing.title }}">
    </figure>

    <div class="description">
        <h4>Description:</h4>
        <p>{{ listing.description }}</p>
    </div>

    <div class="details">
        <h4>Details</h4>
        <ul>
            <li><span class="fw-bold">Category:</span> {{ listing.category }}</li>
            <li><span class="fw-bold">Created:</span> {{ listing.creation_date }}</li>
            <li><span class="fw-bold">Listed by:</span> {{ listing.owner }}</li>
        </ul>
    </div>
{% endblock %}